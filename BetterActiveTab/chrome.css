@media (-moz-bool-pref: "zen.tabs.vertical") {

  /* Apply different borders based on the chosen color in preferences.json */
  /* Default styles for predefined options */
  .tabbrowser-tab:not([pinned]):is([multiselected="true"], [selected]) {
    &:has(#uc-tabs[uc-tabs-preferred_color="primary"]) .tab-background {
      border: 2px solid var(--zen-colors-primary) !important;
    }
    &:has(#uc-tabs[uc-tabs-preferred_color="secondary"]) .tab-background {
      border: 2px solid var(--zen-colors-secondary) !important;
    }
    &:has(#uc-tabs[uc-tabs-preferred_color="tertiary"]) .tab-background {
      border: 2px solid var(--zen-colors-tertiary) !important;
    }
    &:has(#uc-tabs[uc-tabs-preferred_color="border"]) .tab-background {
      border: 2px solid var(--zen-colors-border) !important;
    }
  }

  /* Custom color with fallback based on color scheme */
  @media (prefers-color-scheme: light) {
    .tabbrowser-tab:not([pinned]):is([multiselected="true"], [selected]):has(#uc-tabs[uc-tabs-preferred_color="custom"]) .tab-background {
      border: 2px solid var(--uc-tabs-preferred_color, #000000) !important; /* Fallback to black in light mode */
    }
  }
  @media (prefers-color-scheme: dark) {
    .tabbrowser-tab:not([pinned]):is([multiselected="true"], [selected]):has(#uc-tabs[uc-tabs-preferred_color="custom"]) .tab-background {
      border: 2px solid var(--uc-tabs-preferred_color, #ffffff) !important; /* Fallback to white in dark mode */
    }
  }

  /* Background modification for tab */
  #tabbrowser-tabs {
    & .tabbrowser-tab {
      &[selected] .tab-background {
        background: color-mix(in srgb, var(--zen-colors-secondary) 40%, transparent) !important;
      }
    }
  }
}